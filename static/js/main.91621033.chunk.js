(this["webpackJsonpCaloreator-Project4-Frontend"]=this["webpackJsonpCaloreator-Project4-Frontend"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(25),c=a.n(r),s=(a(57),a(49)),o=a(5),i=a(7),l=a(114),j=(a(82),a(52)),u=a(1);var d,b=function(e){var t=e.variant,a=e.heading,r=e.message,c=Object(n.useState)(!0),s=Object(o.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)(null),b=Object(o.a)(d,2),h=b[0],m=b[1];return console.log(h),Object(n.useEffect)((function(){var e=setTimeout((function(){return l(!1)}),5e3);return m(e),function(){clearTimeout(h)}}),[]),Object(u.jsx)(j.a,{variant:t,onClose:function(){return l(!1)},dismissible:!0,show:i,children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(j.a.Heading,{children:a}),Object(u.jsx)("p",{className:"alert-body",children:r})]})})},h=a(76),m=a(40),O=a(70),p=a(11),x=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(u.jsx)(p.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"}),Object(u.jsx)(p.c,{to:"/meals/create",className:"nav-link",children:"Create Meal"}),Object(u.jsx)(p.c,{to:"/meals",className:"nav-link",children:"Show Meals"})]}),g=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(u.jsx)(p.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),v=Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(p.c,{to:"/",className:"nav-link",children:"Home"})}),f=function(e){var t=e.user;return Object(u.jsx)(m.a,{bg:"primary",variant:"dark",expand:"md",children:Object(u.jsxs)(O.a,{children:[Object(u.jsx)(m.a.Brand,{children:Object(u.jsx)(p.b,{to:"/",style:{color:"#FFF",textDecoration:"none"}})}),Object(u.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(u.jsxs)(h.a,{className:"ms-auto",children:[t&&Object(u.jsxs)("span",{className:"navbar-text me-2",children:["Welcome, ",t.email]}),v,t?x:g]})})]})})},w=a(10),C=a.n(w),y=a(13),S="https://shielded-sierra-15733.herokuapp.com",k="http://localhost:4741",N="localhost"===window.location.hostname?k:S,P=a(21),F=a.n(P),A=function(e,t,a){return F.a.post(N+"/sign-up/",{credentials:{email:e,password:t,password_confirmation:a}})},I=function(e,t){return F.a.post(N+"/sign-in/",{credentials:{email:e,password:t}})},L=function(e){return F.a.delete(N+"/sign-out/",{headers:{Authorization:"Bearer ".concat(e.token)}})},M=function(e,t,a){return F.a.patch(N+"/change-password/",{passwords:{old:e,new:t}},{headers:{Authorization:"Bearer ".concat(a.token)}})},G=a(9),U=a(33),E=function(e){var t=e.msgAlert,a=e.setUser,r=Object(n.useState)(""),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(n.useState)(""),d=Object(o.a)(j,2),b=d[0],h=d[1],m=Object(n.useState)(""),O=Object(o.a)(m,2),p=O[0],x=O[1],g=Object(n.useState)(!1),v=Object(o.a)(g,2),f=v[0],w=v[1],S=function(){var e=Object(y.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,A(s,b,p);case 4:return e.next=6,I(s,b);case 6:r=e.sent,a(r.data.user),t({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"}),w(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),l(""),h(""),x(""),t({heading:"Sign Up Failed with error: "+e.t0.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return f?Object(u.jsx)(i.a,{to:"/"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Sign Up"}),Object(u.jsxs)(G.a,{onSubmit:S,children:[Object(u.jsxs)(G.a.Group,{controlId:"email",children:[Object(u.jsx)(G.a.Label,{children:"Email address"}),Object(u.jsx)(G.a.Control,{required:!0,type:"email",name:"email",value:s,placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"password",children:[Object(u.jsx)(G.a.Label,{children:"Password"}),Object(u.jsx)(G.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"passwordConfirmation",children:[Object(u.jsx)(G.a.Label,{children:"Password Confirmation"}),Object(u.jsx)(G.a.Control,{required:!0,name:"passwordConfirmation",value:p,type:"password",placeholder:"Confirm Password",onChange:function(e){return x(e.target.value)}})]}),Object(u.jsx)(U.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},D=function(e){var t=e.msgAlert,a=e.setUser,r=Object(n.useState)(""),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(n.useState)(""),d=Object(o.a)(j,2),b=d[0],h=d[1],m=Object(n.useState)(!1),O=Object(o.a)(m,2),p=O[0],x=O[1],g=function(){var e=Object(y.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,I(s,b);case 4:r=e.sent,a(r.data.user),t({heading:"Sign In Success",message:"Welcome!",variant:"success"}),x(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),l(""),h(""),t({heading:"Sign In Failed with error: "+e.t0.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(u.jsx)(i.a,{to:"/"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Sign In"}),Object(u.jsxs)(G.a,{onSubmit:g,children:[Object(u.jsxs)(G.a.Group,{controlId:"email",children:[Object(u.jsx)(G.a.Label,{children:"Email address"}),Object(u.jsx)(G.a.Control,{required:!0,type:"email",name:"email",value:s,placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"password",children:[Object(u.jsx)(G.a.Label,{children:"Password"}),Object(u.jsx)(G.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(u.jsx)(U.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},B=function(e){var t=e.msgAlert,a=e.clearUser,r=e.user,c=Object(n.useState)(!1),s=Object(o.a)(c,2),l=s[0],j=s[1];return Object(n.useEffect)((function(){(function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(r);case 2:t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"}),a(),j(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),!r||l?Object(u.jsx)(i.a,{to:"/"}):""},z=function(e){var t=e.msgAlert,a=e.user,r=Object(n.useState)(""),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(n.useState)(""),d=Object(o.a)(j,2),b=d[0],h=d[1],m=Object(n.useState)(!1),O=Object(o.a)(m,2),p=O[0],x=O[1],g=function(){var e=Object(y.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,M(s,b,a);case 4:t({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"}),x(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),l(""),h(""),t({heading:"Change Password Failed with error: "+e.t0.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return!a||p?Object(u.jsx)(i.a,{to:"/"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Change Password"}),Object(u.jsxs)(G.a,{onSubmit:g,children:[Object(u.jsxs)(G.a.Group,{controlId:"oldPassword",children:[Object(u.jsx)(G.a.Label,{children:"Old password"}),Object(u.jsx)(G.a.Control,{required:!0,name:"oldPassword",value:s,type:"password",placeholder:"Old Password",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"newPassword",children:[Object(u.jsx)(G.a.Label,{children:"New Password"}),Object(u.jsx)(G.a.Control,{required:!0,name:"newPassword",value:b,type:"password",placeholder:"New Password",onChange:function(e){return h(e.target.value)}})]}),Object(u.jsx)(U.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},q=a(71),T=a(72).a.div(d||(d=Object(q.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n  // border: 2px solid black;\n"]))),_=function(){return Object(u.jsx)(T,{children:Object(u.jsx)("img",{src:"https://i.imgur.com/zNsoNvI.png",alt:"Caloreator Logo",width:"200",height:"125"})})},H=a(8),J=a(2),W=function(e,t){return F.a.get("".concat(N,"/meals/").concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t.token)}})},R=function(e,t){return F.a.delete("".concat(N,"/meals/").concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}})},Y=function(e,t,a){return F.a.patch("".concat(N,"/meals/").concat(e),{meal:t},{headers:{Authorization:"Bearer ".concat(a.token)}})},K=function(e,t){return F.a.post("".concat(N,"/meals"),{meal:e},{headers:{Authorization:"Bearer ".concat(t.token)}})},Q=function(e){var t=e.user,a=Object(n.useState)([]),r=Object(o.a)(a,2),c=r[0],s=r[1];Object(n.useEffect)((function(){return F.a.get("".concat(N,"/meals"),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){s(e.data.meals)})).catch(console.error)}),[]);var i=c.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)(p.b,{to:"/meals/".concat(e._id),children:Object(u.jsx)("p",{children:e.name})}),Object(u.jsx)("h6",{children:e.type})]},e._id)}));return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Meals:"}),Object(u.jsx)("ul",{children:i})]})})})},V=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)({type:"",name:"",description:"",photo:"",calories:0,fat:0,sugar:0,protein:0,carbs:0}),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(n.useState)(!1),d=Object(o.a)(j,2),b=d[0],h=d[1],m=Object(i.h)().id;Object(n.useEffect)((function(){(function(){var e=Object(y.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(m,t);case 3:n=e.sent,l(n.data.meal),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({heading:"Failed to load movie",message:e.t0.message,variant:"danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var O=function(){var e=Object(y.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,Y(m,s,t);case 4:h(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a({heading:"Failed to update movie",message:e.t0.message,variant:"danger"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return b?Object(u.jsx)(i.a,{to:"/books/".concat(m)}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Update Meal"}),Object(u.jsx)(X,{handleSubmit:O,handleChange:function(e){l((function(t){return Object(J.a)(Object(J.a)({},t),{},Object(H.a)({},e.target.name,e.target.value))}))},meal:s})]})})},X=function(e){var t=e.handleSubmit,a=e.meal,n=e.handleChange;return Object(u.jsxs)(G.a,{onSubmit:t,children:[Object(u.jsxs)(G.a.Group,{controlId:"meal-type",children:[Object(u.jsx)(G.a.Label,{children:"Meal Type"}),Object(u.jsx)(G.a.Control,{placeholder:"Meal Type",name:"type",value:a.type,onChange:function(e){n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"meal-name",children:[Object(u.jsx)(G.a.Label,{children:"Meal Name"}),Object(u.jsx)(G.a.Control,{placeholder:"Meal Name",name:"name",value:a.name,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"description",children:[Object(u.jsx)(G.a.Label,{children:"Meal Description"}),Object(u.jsx)(G.a.Control,{placeholder:"Meal Description",name:"description",value:a.description,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"photo",children:[Object(u.jsx)(G.a.Label,{children:"Photo"}),Object(u.jsx)(G.a.Control,{placeholder:"Photo",name:"photo",value:a.photo,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"calories",children:[Object(u.jsx)(G.a.Label,{children:"Calories"}),Object(u.jsx)(G.a.Control,{placeholder:"Calorie Count",name:"calories",value:a.calories,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"fat",children:[Object(u.jsx)(G.a.Label,{children:"Fat"}),Object(u.jsx)(G.a.Control,{placeholder:"Fat Count",name:"fat",value:a.fat,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"sugar",children:[Object(u.jsx)(G.a.Label,{children:"Sugar"}),Object(u.jsx)(G.a.Control,{placeholder:"Sugar Count",name:"sugar",value:a.sugar,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"protein",children:[Object(u.jsx)(G.a.Label,{children:"Protein"}),Object(u.jsx)(G.a.Control,{placeholder:"Protein Count",name:"protein",value:a.protein,onChange:function(e){return n(e)}})]}),Object(u.jsxs)(G.a.Group,{controlId:"carbs",children:[Object(u.jsx)(G.a.Label,{children:"Carbohydrates"}),Object(u.jsx)(G.a.Control,{placeholder:"Total Carbohydrates",name:"carbs",value:a.carbs,onChange:function(e){return n(e)}})]}),Object(u.jsx)(U.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})},Z=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)({type:"",name:"",description:"",photo:"",calories:0,fat:0,sugar:0,protein:0,carbs:0}),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(n.useState)(null),d=Object(o.a)(j,2),b=d[0],h=d[1],m=function(){var e=Object(y.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,K(s,t);case 4:r=e.sent,h(r.data.meal._id),a({heading:"Meal Posted",message:"Posted ".concat(s.name," successfully!"),variant:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({heading:"Meal Post Failure",message:e.t0.message,variant:"danger"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return t?b?Object(u.jsx)(i.a,{to:"/meals/".concat(b)}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Post Meal"}),Object(u.jsx)(X,{handleSubmit:m,handleChange:function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(J.a)(Object(J.a)({},e),{},Object(H.a)({},a,n))}))},meal:s})]})}):Object(u.jsx)(i.a,{to:"/"})},$=a(113),ee=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)(null),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(n.useState)(!1),d=Object(o.a)(j,2),b=d[0],h=d[1],m=Object(i.h)().id;Object(n.useEffect)((function(){(function(){var e=Object(y.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(m,t);case 3:n=e.sent,l(n.data.meal),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({heading:"Meal failed to load",message:e.t0.message,variant:"danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var O=function(){var e=Object(y.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(m,t);case 3:h(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a({heading:"Failed to delete meal",message:e.t0.message,variant:"danger"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return s?b?Object(u.jsx)(i.a,{to:"/meals"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:s.name}),Object(u.jsxs)("p",{children:["Meal Type: ",s.type]}),Object(u.jsxs)("p",{children:["Description: ",s.description]}),Object(u.jsxs)("p",{children:["Photo: ",s.photo]}),Object(u.jsxs)("p",{children:["Calories: ",s.calories]}),Object(u.jsxs)("p",{children:["Fat: ",s.fat]}),Object(u.jsxs)("p",{children:["Sugar: ",s.sugar]}),Object(u.jsxs)("p",{children:["Protein: ",s.protein]}),Object(u.jsxs)("p",{children:["Carbohydrates: ",s.carbs]}),Object(u.jsx)(U.a,{variant:"danger",onClick:O,children:"Delete Meal"}),Object(u.jsx)(p.b,{to:"/meals/".concat(m,"/edit"),children:Object(u.jsx)(U.a,{variant:"primary",type:"submit",children:"Update Meal"})})]})}):Object(u.jsx)($.a,{animation:"border",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},te=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),j=Object(o.a)(c,2),d=j[0],h=j[1],m=function(e){var t=e.heading,a=e.message,n=e.variant,r=Object(l.a)();h((function(e){return[].concat(Object(s.a)(e),[{heading:t,message:a,variant:n,id:r}])}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f,{user:a}),d.map((function(e){return Object(u.jsx)(b,{heading:e.heading,variant:e.variant,message:e.message,id:e.id},e.id)})),Object(u.jsx)("main",{className:"container",children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/sign-up",element:Object(u.jsx)(E,{msgAlert:m,setUser:r})}),Object(u.jsx)(i.b,{path:"/sign-in",element:Object(u.jsx)(D,{msgAlert:m,setUser:r})}),Object(u.jsx)(i.b,{path:"/sign-out",element:Object(u.jsx)(B,{msgAlert:m,clearUser:function(){return r(null)},user:a})}),Object(u.jsx)(i.b,{path:"/change-password",element:Object(u.jsx)(z,{msgAlert:m,user:a})}),Object(u.jsx)(i.b,{path:"/",element:Object(u.jsx)(_,{})}),Object(u.jsx)(i.b,{path:"/meals",element:Object(u.jsx)(Q,{msgAlert:m,user:a})}),Object(u.jsx)(i.b,{path:"/meals/:id",element:Object(u.jsx)(ee,{msgAlert:m,user:a})}),Object(u.jsx)(i.b,{path:"/meals/create",element:Object(u.jsx)(Z,{msgAlert:m,user:a})}),Object(u.jsx)(i.b,{path:"/meals/:id/edit",element:Object(u.jsx)(V,{msgAlert:m,user:a})})]})})]})},ae=Object(u.jsx)(p.a,{basename:"/Caloreator-Project4-Frontend",children:Object(u.jsx)(te,{})});c.a.render(ae,document.getElementById("root"))},57:function(e,t,a){},82:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.91621033.chunk.js.map